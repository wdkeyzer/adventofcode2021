---
title: "Day 1 - Sonar Sweep"
output: github_document
knit: (function(inputFile, encoding) {
    rmarkdown::render(inputFile, encoding = encoding, output_dir = "md") })
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
	echo = TRUE,
	message = FALSE,
	warning = FALSE
)
```


## Setup and load data

The first step is to load some libraries and get the data loaded into R. 

I've tried to load the data using `Rcurl` but the puzzle inputs differs by user and one needs to login to get to the puzzle input.The `datapasta` package might be helpful. It allows you to select, copy, and paste rectangular data into R.

```{r}
library(tidyverse)
library(datapasta)
```

Start by selecting the data and using Ctrl-C to copy. Iâ€™ve only ever used the dataframe function from this package so lets see if that works. Put your cursor in a code chunk and type df_paste(). Run that line of code and it will paste the data on your clipboard into the chunk. Add a object name to assign the data to and run the chunk again.

```{r eval=FALSE, include=TRUE}
df_paste()
```


```{r}
data <- data.frame(
                  depth = c(137L,138L,139L,140L,
                         143L,146L,147L,149L,155L,156L,159L,153L,163L,169L,
                         175L,180L,183L,184L,206L,219L,226L,233L,231L,
                         232L,234L,231L,234L,231L,234L,232L,230L,235L,
                         225L,237L,245L,254L,263L,275L,288L,290L,291L,
                         292L,316L,334L,343L,346L,359L,354L,352L,374L,
                         377L,378L,391L,409L,419L,427L,433L,437L,411L,
                         416L,435L,442L,438L,440L,443L,459L,460L,466L,467L,
                         468L,467L,470L,488L,493L,504L,505L,506L,517L,
                         523L,526L,525L,532L,541L,558L,559L,561L,563L,
                         565L,582L,589L,595L,586L,571L,603L,607L,621L,
                         634L,642L,646L,648L,651L,685L,702L,707L,729L,
                         738L,741L,736L,737L,761L,763L,765L,769L,772L,
                         774L,779L,795L,809L,835L,841L,836L,845L,848L,849L,
                         874L,878L,880L,881L,889L,890L,915L,932L,936L,
                         945L,946L,966L,965L,968L,980L,987L,989L,993L,
                         994L,996L,997L,1027L,1028L,1049L,1047L,1048L,
                         1047L,1062L,1057L,1066L,1071L,1084L,1093L,1095L,
                         1098L,1100L,1104L,1105L,1117L,1160L,1165L,1166L,
                         1184L,1180L,1181L,1182L,1202L,1206L,1204L,1217L,
                         1227L,1228L,1248L,1249L,1258L,1262L,1267L,1288L,
                         1285L,1280L,1286L,1288L,1303L,1307L,1308L,
                         1309L,1338L,1346L,1357L,1367L,1368L,1373L,1386L,
                         1387L,1389L,1380L,1407L,1405L,1419L,1440L,1465L,
                         1480L,1485L,1489L,1490L,1492L,1497L,1498L,1497L,
                         1499L,1500L,1493L,1503L,1523L,1530L,1536L,1544L,
                         1553L,1569L,1573L,1574L,1605L,1613L,1620L,1628L,
                         1629L,1632L,1625L,1626L,1631L,1630L,1632L,1633L,
                         1639L,1655L,1654L,1670L,1668L,1673L,1675L,
                         1676L,1671L,1673L,1675L,1677L,1671L,1669L,1692L,
                         1695L,1698L,1701L,1712L,1711L,1712L,1715L,1732L,
                         1728L,1726L,1742L,1743L,1744L,1746L,1739L,1744L,
                         1757L,1758L,1760L,1769L,1772L,1773L,1782L,1789L,
                         1794L,1799L,1828L,1852L,1856L,1859L,1866L,1867L,
                         1868L,1876L,1877L,1869L,1874L,1873L,1901L,1910L,
                         1912L,1913L,1919L,1939L,1940L,1941L,1948L,
                         1977L,1976L,1978L,2011L,2012L,2015L,2025L,2035L,
                         2046L,2040L,2041L,2062L,2063L,2064L,2086L,2104L,
                         2112L,2111L,2120L,2121L,2130L,2139L,2141L,2154L,
                         2155L,2157L,2158L,2185L,2181L,2183L,2188L,2189L,
                         2192L,2197L,2191L,2200L,2192L,2220L,2223L,2231L,
                         2237L,2246L,2254L,2245L,2257L,2258L,2263L,2268L,
                         2269L,2281L,2280L,2284L,2291L,2328L,2331L,
                         2313L,2319L,2321L,2324L,2327L,2328L,2346L,2347L,
                         2346L,2347L,2348L,2350L,2353L,2344L,2335L,2337L,
                         2339L,2338L,2342L,2347L,2350L,2351L,2356L,2378L,
                         2379L,2387L,2386L,2385L,2384L,2393L,2407L,2408L,
                         2409L,2412L,2413L,2409L,2422L,2430L,2431L,2432L,
                         2457L,2458L,2459L,2468L,2472L,2473L,2480L,2511L,
                         2493L,2506L,2514L,2522L,2524L,2525L,2530L,
                         2540L,2527L,2536L,2546L,2548L,2552L,2547L,2552L,
                         2551L,2569L,2573L,2590L,2607L,2626L,2624L,2641L,
                         2642L,2643L,2645L,2666L,2691L,2702L,2719L,2734L,
                         2735L,2743L,2750L,2769L,2796L,2797L,2800L,2804L,
                         2806L,2820L,2821L,2822L,2826L,2834L,2835L,2836L,
                         2840L,2841L,2842L,2838L,2826L,2827L,2844L,2843L,
                         2844L,2857L,2875L,2877L,2878L,2908L,2912L,
                         2913L,2916L,2921L,2920L,2923L,2924L,2925L,2942L,
                         2943L,2972L,2984L,2987L,2999L,3020L,3014L,3018L,
                         3017L,3015L,3016L,3018L,3021L,2997L,3000L,2989L,
                         2981L,2988L,2989L,2988L,2989L,2990L,2993L,2998L,
                         2999L,3000L,3007L,3012L,3013L,3023L,3022L,3028L,
                         3063L,3079L,3085L,3086L,3085L,3087L,3097L,3102L,
                         3103L,3110L,3114L,3120L,3136L,3141L,3163L,
                         3164L,3166L,3168L,3179L,3174L,3175L,3180L,3196L,
                         3210L,3188L,3202L,3204L,3201L,3207L,3208L,3217L,
                         3225L,3231L,3230L,3231L,3230L,3274L,3292L,3296L,
                         3321L,3351L,3365L,3367L,3378L,3381L,3379L,3380L,
                         3385L,3383L,3384L,3393L,3403L,3404L,3411L,3426L,
                         3420L,3422L,3423L,3440L,3449L,3460L,3459L,3460L,
                         3463L,3464L,3468L,3492L,3506L,3513L,3520L,
                         3525L,3526L,3529L,3535L,3553L,3555L,3556L,3548L,
                         3563L,3565L,3568L,3571L,3572L,3578L,3583L,3585L,
                         3586L,3590L,3602L,3604L,3610L,3611L,3612L,3640L,
                         3649L,3668L,3658L,3650L,3652L,3654L,3657L,3639L,
                         3640L,3651L,3639L,3653L,3655L,3662L,3683L,3684L,
                         3686L,3692L,3693L,3707L,3717L,3722L,3735L,3737L,
                         3743L,3756L,3753L,3754L,3756L,3759L,3760L,
                         3764L,3766L,3796L,3800L,3809L,3817L,3818L,3819L,
                         3820L,3799L,3798L,3801L,3810L,3811L,3818L,3819L,
                         3826L,3833L,3840L,3842L,3853L,3851L,3835L,3836L,
                         3841L,3846L,3847L,3852L,3861L,3864L,3861L,3869L,
                         3871L,3872L,3887L,3889L,3913L,3928L,3929L,3937L,
                         3961L,3966L,3975L,3998L,3999L,3994L,3989L,3965L,
                         3955L,3959L,3983L,3994L,3995L,3996L,3997L,
                         4000L,4005L,4004L,4005L,4012L,4027L,4007L,4008L,
                         4011L,4023L,4037L,4040L,4062L,4063L,4066L,4073L,
                         4078L,4106L,4113L,4114L,4126L,4131L,4126L,4129L,
                         4164L,4165L,4176L,4162L,4172L,4196L,4200L,4198L,
                         4199L,4196L,4205L,4208L,4220L,4255L,4252L,4249L,
                         4259L,4275L,4281L,4283L,4286L,4295L,4296L,4273L,
                         4271L,4290L,4291L,4296L,4302L,4303L,4315L,
                         4316L,4317L,4329L,4330L,4335L,4336L,4340L,4341L,
                         4342L,4314L,4307L,4309L,4308L,4313L,4322L,4319L,
                         4321L,4318L,4319L,4322L,4317L,4318L,4320L,4324L,
                         4347L,4355L,4358L,4363L,4364L,4375L,4379L,4378L,
                         4390L,4399L,4390L,4395L,4408L,4425L,4419L,4430L,
                         4431L,4437L,4460L,4470L,4472L,4473L,4502L,4494L,
                         4495L,4509L,4514L,4513L,4523L,4527L,4544L,
                         4573L,4583L,4584L,4552L,4586L,4587L,4598L,4601L,
                         4607L,4613L,4607L,4617L,4649L,4647L,4642L,4649L,
                         4659L,4661L,4651L,4652L,4673L,4679L,4684L,4685L,
                         4686L,4687L,4689L,4690L,4696L,4702L,4710L,4683L,
                         4694L,4695L,4696L,4697L,4698L,4700L,4698L,4699L,
                         4701L,4686L,4688L,4712L,4713L,4711L,4729L,4739L,
                         4742L,4762L,4763L,4767L,4773L,4781L,4785L,
                         4775L,4776L,4779L,4777L,4779L,4780L,4787L,4773L,
                         4784L,4789L,4793L,4809L,4828L,4830L,4824L,4827L,
                         4829L,4830L,4834L,4842L,4843L,4844L,4847L,4848L,
                         4849L,4866L,4867L,4868L,4879L,4880L,4883L,4897L,
                         4900L,4904L,4910L,4922L,4931L,4932L,4934L,4935L,
                         4934L,4936L,4946L,4947L,4974L,4978L,4983L,4984L,
                         4985L,4992L,4998L,5007L,5052L,5059L,5067L,
                         5072L,5088L,5087L,5093L,5114L,5115L,5118L,5117L,
                         5118L,5121L,5127L,5128L,5132L,5134L,5135L,5157L,
                         5151L,5156L,5160L,5155L,5151L,5140L,5141L,5163L,
                         5158L,5163L,5166L,5172L,5176L,5179L,5180L,5171L,
                         5174L,5188L,5190L,5212L,5213L,5214L,5215L,5229L,
                         5234L,5237L,5244L,5249L,5250L,5251L,5255L,5256L,
                         5258L,5270L,5272L,5276L,5292L,5293L,5303L,
                         5317L,5325L,5308L,5310L,5318L,5324L,5346L,5356L,
                         5373L,5370L,5384L,5385L,5383L,5387L,5391L,5398L,
                         5399L,5413L,5415L,5416L,5444L,5443L,5450L,5444L,
                         5446L,5447L,5448L,5465L,5470L,5455L,5461L,5441L,
                         5443L,5452L,5457L,5460L,5465L,5466L,5470L,5473L,
                         5510L,5515L,5516L,5517L,5521L,5519L,5510L,5524L,
                         5526L,5531L,5555L,5529L,5541L,5543L,5545L,
                         5549L,5559L,5572L,5574L,5601L,5622L,5631L,5633L,
                         5659L,5661L,5669L,5698L,5701L,5685L,5682L,5708L,
                         5707L,5694L,5695L,5698L,5699L,5700L,5711L,5712L,
                         5720L,5721L,5723L,5730L,5723L,5721L,5729L,5738L,
                         5739L,5740L,5741L,5744L,5747L,5748L,5750L,5751L,
                         5761L,5756L,5761L,5764L,5768L,5786L,5798L,5799L,
                         5808L,5829L,5840L,5842L,5834L,5842L,5843L,
                         5861L,5863L,5882L,5898L,5904L,5909L,5927L,5931L,
                         5925L,5927L,5920L,5921L,5946L,5954L,5971L,6002L,
                         6005L,6001L,6015L,6018L,6020L,6030L,6031L,6032L,
                         6034L,6035L,6050L,6051L,6055L,6059L,6020L,6014L,
                         6015L,6011L,5990L,5991L,5969L,5970L,5950L,5951L,
                         5961L,5962L,5964L,5970L,5972L,5977L,5987L,5989L,
                         5998L,6001L,6006L,6009L,6012L,6017L,6023L,
                         6028L,6029L,6030L,6051L,6053L,6055L,6056L,6058L,
                         6082L,6090L,6094L,6106L,6108L,6111L,6128L,6131L,
                         6150L,6157L,6158L,6183L,6180L,6182L,6191L,6153L,
                         6152L,6178L,6174L,6164L,6167L,6175L,6187L,6186L,
                         6187L,6199L,6204L,6205L,6210L,6213L,6214L,6217L,
                         6228L,6206L,6212L,6211L,6210L,6216L,6221L,6224L,
                         6226L,6243L,6245L,6237L,6238L,6246L,6247L,
                         6250L,6256L,6269L,6260L,6261L,6266L,6268L,6271L,
                         6281L,6279L,6268L,6229L,6231L,6233L,6235L,6241L,
                         6248L,6250L,6261L,6263L,6276L,6286L,6288L,6291L,
                         6274L,6273L,6276L,6285L,6292L,6297L,6330L,6331L,
                         6295L,6311L,6312L,6325L,6319L,6321L,6322L,6325L,
                         6327L,6340L,6341L,6350L,6356L,6357L,6365L,6370L,
                         6383L,6382L,6396L,6394L,6395L,6403L,6404L,
                         6399L,6400L,6409L,6411L,6414L,6421L,6424L,6429L,
                         6430L,6440L,6441L,6450L,6455L,6464L,6481L,6495L,
                         6474L,6475L,6476L,6478L,6482L,6506L,6524L,6497L,
                         6490L,6492L,6508L,6507L,6511L,6518L,6519L,6528L,
                         6554L,6555L,6562L,6563L,6571L,6574L,6564L,6581L,
                         6582L,6584L,6585L,6586L,6587L,6590L,6617L,6623L,
                         6653L,6652L,6636L,6638L,6640L,6660L,6663L,
                         6668L,6673L,6675L,6679L,6680L,6683L,6699L,6698L,
                         6694L,6701L,6715L,6697L,6700L,6706L,6715L,6702L,
                         6705L,6707L,6719L,6720L,6721L,6722L,6723L,6727L,
                         6724L,6725L,6726L,6732L,6739L,6741L,6760L,6771L,
                         6773L,6772L,6775L,6783L,6785L,6791L,6800L,6808L,
                         6809L,6810L,6811L,6793L,6797L,6799L,6801L,6805L,
                         6806L,6833L,6839L,6840L,6845L,6846L,6856L,
                         6869L,6861L,6878L,6881L,6903L,6914L,6915L,6931L,
                         6934L,6936L,6938L,6940L,6954L,6952L,6953L,6961L,
                         6951L,6953L,6961L,6963L,6968L,6976L,6977L,6980L,
                         6986L,6995L,6996L,7006L,7011L,6991L,6992L,6996L,
                         7002L,7025L,7029L,7041L,7040L,7041L,7033L,7036L,
                         7038L,7042L,7044L,7058L,7064L,7071L,7076L,7078L,
                         7079L,7091L,7090L,7086L,7088L,7105L,7140L,
                         7143L,7132L,7146L,7137L,7139L,7141L,7142L,7151L,
                         7153L,7154L,7160L,7162L,7164L,7167L,7171L,7183L,
                         7205L,7218L,7220L,7252L,7264L,7270L,7274L,7275L,
                         7285L,7286L,7289L,7311L,7299L,7301L,7325L,7331L,
                         7341L,7343L,7348L,7380L,7388L,7390L,7392L,7400L,
                         7412L,7414L,7419L,7448L,7430L,7436L,7450L,7451L,
                         7484L,7493L,7503L,7494L,7495L,7521L,7507L,
                         7514L,7517L,7519L,7532L,7558L,7574L,7575L,7593L,
                         7595L,7620L,7636L,7643L,7644L,7634L,7637L,7639L,
                         7650L,7651L,7652L,7666L,7673L,7690L,7693L,7702L,
                         7703L,7735L,7736L,7727L,7743L,7745L,7763L,7764L,
                         7734L,7735L,7739L,7743L,7744L,7750L,7751L,7754L,
                         7759L,7765L,7770L,7804L,7808L,7790L,7791L,7793L,
                         7794L,7795L,7796L,7798L,7808L,7775L,7776L,
                         7777L,7799L,7800L,7803L,7817L,7818L,7834L,7832L,
                         7834L,7843L,7849L,7850L,7853L,7856L,7859L,7861L,
                         7862L,7864L,7860L,7859L,7861L,7862L,7863L,7862L,
                         7867L,7853L,7854L,7860L,7855L,7859L,7860L,7865L,
                         7845L,7855L,7858L,7881L,7882L,7899L,7902L,7930L,
                         7931L,7932L,7933L,7935L,7938L,7941L,7953L,7954L,
                         7952L,7965L,7967L,7976L,7977L,7980L,7982L,
                         7991L,8001L,8017L,8018L,8036L,8037L,8047L,8049L,
                         8051L,8041L,8043L,8044L,8045L,8046L,8047L,8048L,
                         8054L,8055L,8082L,8083L,8084L,8093L,8094L,8116L,
                         8117L,8118L,8124L,8125L,8142L,8145L,8150L,8154L,
                         8156L,8175L,8176L,8184L,8190L,8184L,8200L,8214L,
                         8236L,8237L,8253L,8264L,8271L,8280L,8282L,8284L,
                         8296L,8297L,8299L,8304L,8329L,8341L,8345L,
                         8358L,8359L,8366L,8370L,8368L,8374L,8377L,8378L,
                         8379L,8390L,8391L,8394L,8399L,8405L,8406L,8405L,
                         8404L,8397L,8400L,8406L,8426L,8427L,8451L,8457L,
                         8458L,8459L,8470L,8448L,8450L,8452L,8474L,8494L,
                         8495L,8500L,8499L,8496L,8500L,8501L,8502L,8503L,
                         8530L,8541L,8545L,8547L,8566L,8593L,8596L,8597L,
                         8596L,8609L,8612L,8627L,8631L,8623L,8624L,
                         8626L,8641L,8642L,8644L,8646L,8651L,8654L,8657L,
                         8666L,8673L,8674L,8687L,8707L,8715L,8722L,8711L,
                         8712L,8715L,8712L,8719L,8722L,8719L,8720L,8722L,
                         8723L,8727L,8729L,8731L,8732L,8733L,8737L,8743L,
                         8741L,8742L,8747L,8749L,8753L,8766L,8771L,8776L,
                         8784L,8789L,8806L,8816L,8840L,8847L,8858L,8859L,
                         8860L,8862L,8863L,8866L,8867L,8873L,8884L,
                         8882L,8884L,8890L,8858L,8861L,8862L,8860L,8861L,
                         8879L,8900L,8928L,8940L,8942L,8940L,8961L,8962L,
                         8969L,8988L,8993L,8998L,9006L,9011L,9013L,9037L,
                         9050L,9060L,9067L,9068L,9090L,9108L,9113L,9116L,
                         9137L,9138L,9115L,9116L,9119L,9125L,9126L,9124L,
                         9151L,9161L,9170L,9173L,9182L,9187L,9202L,9203L,
                         9221L,9223L,9222L,9223L,9234L,9235L,9249L,
                         9268L,9260L,9284L,9302L,9305L,9324L,9325L,9326L,
                         9320L,9315L,9317L,9319L,9320L,9336L,9347L,9354L,
                         9371L,9376L,9386L,9387L,9397L,9396L,9397L,9399L,
                         9404L,9405L,9407L,9423L,9424L,9432L,9434L,9435L,
                         9436L,9438L,9448L,9456L,9457L,9458L,9457L,9448L,
                         9449L,9453L,9454L,9460L,9469L,9458L,9459L,9469L,
                         9477L,9481L,9482L,9488L,9496L,9497L,9498L,
                         9500L,9501L,9518L,9520L,9523L,9539L,9537L,9548L,
                         9555L,9568L,9576L,9579L,9589L,9591L,9590L,9594L,
                         9595L,9596L,9598L,9605L,9602L,9604L,9600L,9613L,
                         9610L,9616L,9638L,9639L,9640L,9648L,9653L,9667L,
                         9679L,9680L,9681L,9677L,9679L,9680L,9681L,9706L,
                         9707L,9709L,9710L,9714L,9719L,9736L,9739L,9762L,
                         9753L,9770L,9739L,9752L,9753L,9752L,9753L,
                         9762L,9764L,9765L,9766L,9769L,9774L,9773L,9782L,
                         9792L,9793L,9798L,9809L,9810L,9809L,9806L,9807L,
                         9806L,9808L,9810L,9813L,9818L,9816L,9832L,9833L,
                         9831L,9851L,9839L,9847L,9849L,9850L,9851L,9853L,
                         9854L,9858L,9862L,9865L,9872L,9875L,9881L,9883L,
                         9884L,9885L,9898L,9903L,9904L,9899L,9906L,9907L,
                         9909L,9939L,9955L,9956L,9957L,9963L,9964L,
                         9965L,9969L,9972L,9980L,10002L,10003L,10004L,10007L,
                         10008L,10015L,10032L,10047L,10060L,10066L,10071L,
                         10078L,10079L,10083L,10095L,10096L,10097L,
                         10090L,10091L,10088L,10085L,10095L,10096L,10099L,
                         10089L,10108L,10109L,10110L,10107L,10112L,10119L,
                         10135L,10133L,10121L,10130L,10125L,10127L,10128L,
                         10131L,10121L,10134L,10137L,10139L,10179L,10180L,
                         10182L,10194L)
        )
```

## Part I

We need to calculate the times a depth measurement increases from the previous measurement. I will use the `lag()` function for this and add a variable called `prev_depth`.

```{r}
output1 <- data %>% 
  mutate(prev_depth = lag(x = depth))
```

Now we need to evaluate for every row if the value for `depth` is larger than `prev_depth`. We can use a logical operator for this.

```{r}
output2<- output1 %>% 
  mutate(increased1 = depth > prev_depth)
```

Now we can count the number of TRUE statements which tells us the number of times a depth increases from the previous one.

```{r}
output2 %>% 
  count(increased1)
```

![screenshot of the first star received](img/day1 first star.png)

## Part II

Apparently we now need to create a sliding window, adding together the previous and next values with the current one. The function `lead()` pulls the next value like `lag()` does with the previous one. 

```{r}
output3 <- output2 %>% 
  mutate(next_depth = lead(depth))
```

Now we can calculate the sliding window by adding the previous and the next depth to all depths.

```{r}
output4 <- output3 %>% 
  mutate(slide_3 = prev_depth + depth + next_depth)
```

Finally we can evaluate whether a sliding window of three measurements is larger than a previous one.

```{r}
output5 <- output4 %>% 
  mutate(increased2 = slide_3 > lag(slide_3))
```

To count the number of times a sliding window increased from the previouw one we can count the number of TRUE of `increased2`. 

```{r}
output5 %>% 
  count(increased2)
```

Yes! Two gold stars.

![twitter post completed first day](img/day1 twitter.png)